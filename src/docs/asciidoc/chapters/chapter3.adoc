:imagesdir: images
== JHipster's UI components

A modern web application has many UI components. It likely has some sort of model-view-controller (MVC) framework as well as a CSS framework, and tooling to simplify the use of these. With a web application, you can have users all over the globe, so translating your application into other languages might be important. If you're developing large amounts of CSS, you'll likely use a CSS pre-processor like Less or Sass. Then you'll need a build tool to refresh your browser, run your pre-processor, run your tests, minify your web assets, and prepare your application for production. This section shows how JHipster includes all of these UI components for you and makes your developer experience a joyous one.

=== AngularJS
AngularJS (Angular) is the MVC framework used by JHipster. It's written in JavaScript and just using it makes you a hipster.
I've been tracking statistics on jobs and skills for JavaScript MVC frameworks ever since I compared JVM Web frameworks
at Devoxx France in 2013. At that time, Backbone was the dominant framework.

[.clearfix]
--
[.left]
[[img-angular-jobs-2013]]
.Jobs on Dice, March 2013
image::chapter3/angular/dice-jobs-march2013.png[Jobs on Dice in 2013, 450, scaledwidth="75%"]
[.left]
[[img-angular-skills-2013]]
.Skills on LinkedIn, March 2013
image::chapter3/angular/linkedin-skills-march2013.png[Skills on LinkedIn in 2013, 450, scaledwidth="75%"]
--

In February 2014, I updated those statistics for a presentation. The number of Dice jobs that mentioned Angular had grown to roughly equal the number that mentioned Backbone, and
a lot of people had added Angular to their LinkedIn profiles. I found that Ember had grown around 300%, Backbone 200%, and Angular
1,000%!

[.clearfix]
--
[.left]
[[img-angular-jobs-2014]]
.Jobs on Dice, February 2014
image::chapter3/angular/dice-jobs-february2014.png[Jobs on Dice in 2014, 450, scaledwidth="75%"]
[.left]
[[img-angular-skills-2014]]
.Skills on LinkedIn, February 2014
image::chapter3/angular/linkedin-skills-february2014.png[Skills on LinkedIn in 2014, 450, scaledwidth="75%"]
--

In March 2015, I updated these statistics once again. I found the number of jobs for Angular had doubled over the last
year, while jobs for Ember and Backbone had fallen slightly. The number of developers who mentioned skills in Ember and Backbone had
increased 200%, while the number of skilled Angular folks had risen 400%.

Angular has rapidly become the most-popular MVC web framework. Like Struts in the early 2000s and
Rails in the mid-2000s, it's changed the way developers write web applications. Today, data is exposed via REST APIs and UIs
are written in JavaScript. As a Java developer, I was immediately attracted to Angular when I saw its seperation of concerns.
It recommended organizing your application into several different components:

* Controllers: JavaScript functions that retrieve data from services and expose it to templates using `$scope`.
* Services: JavaScript functions that make HTTP calls to a JSON API.
* Templates: HTML pages that display data. Use Angular directives to iterate over collections and show/hide elements.
* Filters: Data-manipulation tools that can transform data (e.g. uppercase, lowercase, ordering, and searching).
* Directives: HTML processors that allow components to be written. Similar to JSP tags.

==== History
AngularJS was started by Miško Hevery in 2009. He was working on a project that was using GWT. Three developers had been
developing the product for six months, and Miško rewrote the whole thing in Angular in three weeks. At that time, Angular
was a side project he'd created. It didn't require you to write much in JavaScript as you could program most of the logic
in HTML. The GWT version of the product contained 17,000 lines of code. The Angular version was only 1,000 lines of code!

==== Basics
Creating Hello World with Angular is pretty simple.

[source,html]
----
<!doctype html>
<html ng-app>
<head>
    <title>Hello World</title>
</head>
<body>
<div>
    <label>Name:</label>
    <input type="text" ng-model="name" placeholder="Enter a name here">
    <hr>
    <h1>Hello {{name}}!</h1>
</div>
<script src="http://code.angularjs.org/1.3.11/angular.min.js"></script>
</body>
</html>
----

In this example, `ng-model` maps to the value displayed in `{{name}}`. When using jQuery to do something similar, you
have to add an event handler that listens for a change of value. With Angular, the two-way binding is done for you
and it saves you from writing a lot of boilerplate code. The `{{ng-app}}` directive on line 2 makes this an Angular
application.

The MVC pattern is a common one for web frameworks to implement. With Angular, the model is represented
by a JavaScript object that you create or retrieve from a service. The view is a HTML template and the controller
is a JavaScript function that watches for changes to the model from the user.

[[img-angular-mvc]]
.MVC in Angular
image::chapter3/angular/angular-mvc.png[MVC in Angular, 500, scaledwidth="75%", align=center]

Below is a search controller and a service to fetch search results. It's expected that a JSON endpoint exists at
`/api/search` on the same server.

[source,javascript,linenums]
----
.controller('SearchController', function () {
    console.log("In Search Controller...");
})

.factory('SearchService', function ($http) {
    var service = {
        query: function (term) {
            return $http.get('/api/search/' + term);
        }
    };
    return service;
});
----

TIP: To see the JavaScript console in Chrome, use kbd:[Command+Option+J] in Mac OS X or kbd:[Control+Shift+J] in Windows or Linux.

To make this controller available at a URL, you can use Angular's ngRoute.

[source,javascript]
----
angular.module('myApp.search', ['ngRoute'])

    .config(['$routeProvider', function ($routeProvider) {
        $routeProvider
            .when('/search', {
                templateUrl: 'search/index.html',
                controller: 'SearchController'
            })
    }])
----

The template to call this controller can be as simple as a form with a button.

[source,html]
----
<form ng-submit="search()">
    <input type="search" name="search" ng-model="term">
    <button>Search</button>
</form>
----

To get the results from the `SearchService` in your controller, you can use Angular's dependency injection.

[source,javascript]
----
.controller('SearchController', function ($scope, SearchService) { <1>
    $scope.search = function () { <2>
        console.log("Search term is: " + $scope.term); <3>
        SearchService.query($scope.term).then(function (response) {
            $scope.searchResults = response.data;
        });
    };
})
----
<1> To inject `SearchService` into `SearchController`, simply add it as a parameter to the controller's argument list.
<2> `$scope.search()` is a function that's called from the HTML's `<form>`, wired up using the `ng-submit` directive.
<3> `$scope.term` is a variable that's wired to `<input>` using the `ng-model` directive.

Another common way to write controllers is to name the arguments passed into the function. This helps if you plan
to obfuscate your code.

TIP: Angular allows you to bind data to its `$scope` object. It represents your application's model. There's also a `$rootScope`
object that can be used to share data between components. Scopes occupy a hierarchical structure that mimics the
DOM structure. Scopes can watch expressions and propagate events.

[source,javascript]
----
.controller('SearchController', ['$scope', 'SearchService', function ($scope, SearchService) {
    ...
}]);
----

To make the aforementioned module work, you need a HTML page that includes Angular and ngRoute.

[source,html]
.index.html
----
<!DOCTYPE html>
<html ng-app="myApp"> <1>
<head lang="en">
    <meta charset="UTF-8">
    <title>My AngularJS App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<ul class="menu">
    <li><a href="#/search">search</a></li>
</ul>

<div ng-view></div> <2>

<script src="http://code.angularjs.org/1.3.11/angular.min.js"></script>
<script src="http://code.angularjs.org/1.3.11/angular-route.min.js"></script>
<script src="app.js"></script> <3>
<script src="search/search.js"></script>
</body>
</html>
----
<1> The `ng-app` directive tells Angular the name of your app.
<2> `ng-view` is where your rendered template is displayed.
<3> `app.js` contains your application's definition.

[source,javascript]
.app.js
----
'use strict'; <1>

// Declare app level module which depends on views, and components
angular.module('myApp', ['ngRoute', 'myApp.search'])
.config(['$routeProvider', function($routeProvider) {
    // default URL to route to
    $routeProvider.otherwise({redirectTo: '/search'});
}]);
----
<1> ECMAScript 5's strict mode is a way to opt in to a restricted variant of JavaScript. It improves your browser's error reporting and performance.

Does your API return data like the following?

[source,json]
----
include::{sourcedir}/chapter3/angular/search-results.json[]
----

If so, you could display it in a template with Angular's `ng-repeat` directive.

[source,html]
----
<table ng-show="searchResults.length" class="table">
    <thead>
    <tr>
        <th>Name</th>
        <th>Phone</th>
        <th>Address</th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="person in searchResults">
        <td>{{person.name}}</td>
        <td>{{person.phone}}</td>
        <td>{{person.address.street}}<br/>
            {{person.address.city}}, {{person.address.state}} {{person.address.zip}}
        </td>
    </tr>
    </tbody>
</table>
----

To read a more in-depth example (including source code) of building a search and edit application with Angular, see
my article http://raibledesigns.com/rd/entry/getting_started_with_angularjs["Getting Started with AngularJS"].

==== AngularUI Router
https://github.com/angular-ui/ui-router[AngularUI Router] is a routing component for AngularJS. It's organized around
states, to which you can attach routes and other behaviors. Some of its best features include support for
nested/named views, tab history, and loading data before rendering a view. You can see an example of its basic
features at http://angular-ui.github.io/ui-router/sample/.

JHipster includes AngularUI Router (often called ui-router) by default. It's a great framework that I've enjoyed
using on several projects. To use it, you'll need to reference its JavaScript file (`angular-ui-router.min.js`) instead of `angular-route.min.js` in
`index.html`. You'll also need to change from using `ng-view` to using `ui-view`.

[source,javascript]
.index.html
----
<div ui-view></div>

<script src="http://code.angularjs.org/1.3.11/angular.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular-ui-router/0.2.14/angular-ui-router.js"></script>
----

Next, change your `app.js` to use `ui-router` instead of `ngRoute`. Then set up your application states with code like
the following listing.

[source,javascript]
.app.js
----
include::{sourcedir}/chapter3/angular/ui-router.js[]
----

AngularUI Router allows you to look up data before displaying a page. It does this with its `resolve` property. For example,
by enhancing the 'search.edit' state, we can look up the person from the `SearchService` before instantiating the controller.

[source,javascript]
----
.state('search.edit', {
      url: '/edit/:id',
      templateUrl: 'search/edit.html',
      controller: 'EditController',
      resolve: {
          SearchService: 'SearchService', <1>
          person: function($stateParams, SearchService) {
              return SearchService.get({id: $stateParams}).$promise; <2>
          }
      }
  })
----
<1> This is necessary to indicate the name of the service to the line below this.
<2> This assumes your service has a `get(id)` method defined.

Once you've done this, you can inject the `person` object into your controller directly.

[source,javascript]
----
.controller('EditController', function ($scope, person) {
    // make person available to template
    $scope.person = person;
})
----

==== Angular's $resource
Angular ships with a https://docs.angularjs.org/api/ngResource/service/$resource[$resource factory] that allows you to
interact with a http://en.wikipedia.org/wiki/Representational_state_transfer[RESTful] API with only a few lines of code.
If your API is implemented so that you can perform CRUD (create, read, update, delete) at a specific endpoint, you can use
`$resource` to wrap that endpoint, and _voila_, you have a service!

[source,javascript]
----
.factory('Product', function($resource) {
    return $resource(API_HOSTNAME + '/api/products/:id');
});
----

This gives you a number of actions (or methods) by default. You can easily override these methods or add new ones.

[source,javascript]
----
{
    'get':    {method:'GET'},
    'save':   {method:'POST'},
    'query':  {method:'GET', isArray:true},
    'remove': {method:'DELETE'},
    'delete': {method:'DELETE'}
};
----

You can can then use this service in a controller using `Product.get{id: '123'}`. If you're reading the `id` from the URL,
you can use ui-router's `$stateParams` so it becomes `Product.get{id: $stateParams.id}`. To use this service in
ui-router's `resolve` property, you'll need to tack on `$promise` to the end.

A `$promise` is a promise of the original server interaction that created this instance or collection. It's a service
that helps you run functions asynchronously, and to use their return values (or exceptions) when they are done processing.
On success, a promise resolves with the same resource instance or collection object, updated with data from server.
On failure, a promise resolves with the HTTP response object, but does not contain a `resource` property.
A resource instance also has a `$resolved` property that returns `true` after its first server interaction completes
(regardless of success or rejection).

==== AngularJS 2.0
In October 2014, the Angular team announced the http://www.infoq.com/news/2014/10/angular-2-atscript[details of Angular
2.0]. The announcement led to a bit of upheaval in the AngularJS developer community. The API for writing
Angular applications was going to change and it was to be based on a new language, AtScript. There would be no migration
path and users would have to continue using 1.x or rewrite their applications for 2.x.

A new syntax was introduced that binds data to element properties, not attributes. The advantage of this syntax
is it allows you to use any web component in an Angular app, not just those retrofitted to work with Angular.

[source,html]
----
<input type="text" [value]="firstName">
<button (click)="addPerson()">Add</button>
<input type="checkbox" [checked]="someProperty">
----

Angular 2.x also eliminates the following concepts introduced in 1.0.

* Controllers
* Directive definition object
* `$scope`
* `angular.module`
* jqLite

In March 2015, the Angular team http://www.infoq.com/news/2015/03/angular-2-concerns-addressed[addressed community concerns], announcing that they would be using http://www.typescriptlang.org/[TypeScript] over AtScript and that they
would provide a migration path for Angular 1.x users. The Angular 2.0 project is hosted at https://angular.io/. The team
plans to support Angular 1.x (at https://angularjs.org/) as long as its web traffic exceeds the 2.0 site.

JHipster will add support for Angular 2 once it's deemed mature enough for production use. In the meantime, I recommend you read and follow https://github.com/johnpapa/angular-styleguide[John Papa's Angular Style Guide] to prepare for Angular 2.

Now that you've learned a bit about the hottest web framework on the planet, let's take a look at the most
popular CSS framework: Bootstrap.

=== Bootstrap

http://getbootstrap.com/[Bootstrap] is a CSS framework that simplifies the development of web applications. It provides a
number of CSS classes and HTML structures that allow you to develop HTML user interfaces that look good by default. Not
only that, but its 3.0 version is responsive by default, which means it works better (or even best) on a mobile device.

==== Bootstrap's grid system

Most CSS frameworks provide a grid system that allows you to position columns and cells in a respectable way. Bootstrap's
basic grid system is built with containers, rows, and columns. It's 940 pixels (px) wide, divided into 12 columns. The grid
adapts to widths of 724 and 1170 pixels, according to your viewport. On viewports narrower than 767 pixels, the columns become
fluid and stack vertically.

A basic example of the grid:

[source,html]
----
include::{sourcedir}/chapter3/bootstrap/grid-basic.html[]
----

When rendered with Bootstrap's CSS, the above HTML looks as follows on a desktop. The minimum width of the container element
on the desktop is set to 1200 pixels.

[[img-bootstrap-basic-grid-desktop]]
.Basic grid on desktop
image::chapter3/bootstrap/basic-grid-desktop.png[Basic grid on desktop, 991, scaledwidth="100%"]

If you squish your browser to less than 1200 pixels wide or render this same document on a smaller screen, the columns
will stack.

[[img-bootstrap-basic-grid-mobile]]
.Basic grid on a mobile device
image::chapter3/bootstrap/basic-grid-mobile.png[Basic grid on a mobile device, 768, scaledwidth="75%"]

Bootstrap's grid can be used to align and position your application's elements, widgets, and features. It's helpful
to understand a few basics if want to use it effectively.

* It's based on 12 columns.
* Just use "md" class and fix as needed.
* It can be used to size input fields.

Bootstrap 3's grid system has four tiers of classes: xs (phones), sm (tablets), md (desktops), and lg (larger desktops).
You can use nearly any combination of these classes to create more dynamic and flexible layouts. Below is an example of a
grid that's a little more advanced.

Each tier of classes scales up, meaning that if you plan to set the same widths for xs and sm, you only need to specify xs.

[source,html]
----
include::{sourcedir}/chapter3/bootstrap/grid-advanced.html[]
----

[[img-bootstrap-advanced-grid-desktop]]
.Advanced grid
image::chapter3/bootstrap/advanced-grid-desktop.png[Advanced grid, 983, scaledwidth="100%"]

You can use size indicators to specify breakpoints in the columns. Breakpoints indicate where a column wraps onto the next
row. In the HTML above, "md" is the size indicator. Boostrap supports "xs", "sm", "md", "lg", and "xl".

==== Responsive utility classes
Bootstrap also includes a number of utility classes that can be used to show and hide elements based on browser size.

* `.visible-[xs|sm|md|lg]`
* `.hidden-[xs|sm|md|lg]`

==== Forms
When you add Bootstrap's CSS to your web application, chances are it'll quickly start to look better. Typography, margins,
and padding will look better by default. However, your forms might look funny, because Bootstrap requires a few
classes on your form elements to make them look good. Below is an example of a form element.

[source,html]
----
include::{sourcedir}/chapter3/bootstrap/basicelement.html[]
----

[[img-bootstrap-basic-element]]
.Basic form element
image::chapter3/bootstrap/basicelement.png[Basic form element, 829, scaledwidth="90%"]

If you'd like to indicate that this form element is not valid, you'll need to modify the above HTML to display validation warnings.

[source,html]
----
include::{sourcedir}/chapter3/bootstrap/basicelement-withvalidation.html[]
----

[[img-bootstrap-basic-element-with-validation]]
.Form element with validation
image::chapter3/bootstrap/basicelement-validation.png[Form element with validation, 829, scaledwidth="90%"]

==== CSS
When you add Bootstrap's CSS to a HTML page, the default settings immediately improve the typography. Your `<h1>` and `<h2>`
headings become semi-bold and are sized accordingly. Your paragraph margins, body text, and block quotes will look better.
If you want to align text in your pages, `text-[left|center|right]` are useful classes. For tables, a `table` class
gives them a better look and feel by default.

To make your buttons look better, Bootstrap provides `btn` and a number of `btn-*` classes.

[source,html]
----
include::{sourcedir}/chapter3/bootstrap/buttons.html[]
----

[[img-bootstrap-buttons]]
.Buttons
image::chapter3/bootstrap/buttons.png[Buttons, 500, scaledwidth="55%"]

==== Components
Bootstrap ships with a number of components included. Some require JavaScript; some only require HTML5 markup and
CSS classes to work. Its rich set of components have helped make it the most popular project on GitHub. Web developers
have always liked components in their frameworks. A framework that offers easy-to-use components often allows developers
to write less code. Less code to write means there's less code to maintain!

Some popular Bootstrap components include: dropdowns, button groups, button dropdowns, navbar, breadcrumbs, pagination,
alerts, progress bars, and panels. Below is an example of a navbar with a dropdown.

[[img-bootstrap-navbar]]
.Navbar with dropdown
image::chapter3/bootstrap/navbar-with-dropdown.png[Navbar with dropdown, 867, scaledwidth="100%"]

When rendered on a mobile device, everything collapses into a hamburger menu that can expand downward.

[[img-bootstrap-navbar-mobile]]
.Navbar on mobile
image::chapter3/bootstrap/navbar-on-mobile.png[Navbar on mobile, 467, scaledwidth="50%"]

This navbar requires quite a bit of HTML markup, not shown here for the sake of brevity. You can view this source
online in link:http://getbootstrap.com/components/#navbar-default[Bootstrap's documentation]. The simpler example below
shows the basic structure.

[source,html]
----
include::{sourcedir}/chapter3/bootstrap/navbar.html[]
----

Alerts are useful for displaying feedback to the user. You can invoke differently colored alerts with different classes. You'll need
to add an `alert` class, plus `alert-[success|info|warning|danger]` to indicate the colors.

[source,html]
----
include::{sourcedir}/chapter3/bootstrap/alerts.html[]
----

This renders alerts like the following.

[[img-bootstrap-alerts]]
.Alerts
image::chapter3/bootstrap/alerts.png[Alerts, 828, scaledwidth="100%"]

To make an alert closeable, you need to add an `.alert-dismissible` class and a close button.

[source,html]
----
<div class="alert alert-warning alert-dismissible" role="alert">
  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
  <strong>Warning!</strong> Better check yourself, you're not looking too good.
</div>
----

[[img-bootstrap-alert-dismissable]]
.Closeable alert
image::chapter3/bootstrap/alert-dismissable.png[Closeable alert, 830, scaledwidth="100%"]

TIP: To make the links in your alerts match the colors of the alerts, use `.alert-link`.

==== Icons
Icons have always been a big part of web applications. Showing the user a small image is often sexier
and hipper than plain text. Humans are visual beings and icons are a great way to spice things up. In the last
several years, font icons have become popular for web development. Font icons are just fonts, but they contain
symbols and glyphs instead of text. You can style, scale, and load them quickly because of their small size.

The http://glyphicons.com/[Glyphicons] Halflings set of font icons is included with Bootstrap. They're not normally free,
but their creator has made them free for Bootstrap users. There are more than 250 glyphs in this set. They're often
used to display eye candy on buttons.

[source,html]
----
<button class="btn btn-info"><i class="glyphicon glyphicon-plus"></i> Add</button>
<button class="btn btn-danger"><i class="glyphicon glyphicon-minus"></i> Delete</button>
<button class="btn btn-default"><i class="glyphicon glyphicon-pencil"></i> Edit</button>
----

You can see how the icons change color based on the font color defined for the element they're inside.

[[img-bootstrap-buttons-icons]]
.Buttons with icons
image::chapter3/bootstrap/buttons-with-icons.png[Buttons with icons, 241, scaledwidth="25%"]

You can use other icon fonts with Bootstrap and JHipster, http://fortawesome.github.io/Font-Awesome/[Font Awesome]
being one of the most popular. It's completely free for commercial use and contains over 500 icons. JHipster uses
Font Awesome for its website, but not for generated projects. The
https://github.com/jhipster/generator-jhipster/issues/978#issuecomment-69988321[reason] for not including Font Awesome is that
Glyphicons is the default and it's easy to change the font in your project. Simply add it as a dependency
in your `bower.json` file.

==== Customizing CSS
If you'd like to override Bootstrap classes in your project, the easiest thing to do is to put the override rule in a CSS
file that comes after Bootstrap's CSS. Or you can modify `src/main/webapp/assets/styles/main.css` directly. If you're
using Compass to compile `*.scss` files, you can modify `src/main/scss/main.scss` instead. Using Compass results in a much
more concise authoring environment. Below is the default `main.scss` file that Yeoman generates. You can see that
it overrides the font location variable, imports Bootstrap, then overrides some of its default `body` rules.

[source,sass]
----
$icon-font-path: "../../bower_components/bootstrap-sass/assets/fonts/bootstrap/";

@import "bootstrap-sass/assets/stylesheets/_bootstrap.scss";

body {
    background: #fafafa;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    color: #333;
}
----

==== Angular and Bootstrap
There's a number of other open-source components that can help to further enhance an application built with Angular and
Bootstrap that are not included in JHipster at the time of this writing:

* https://angular-ui.github.io/bootstrap/[UI-Bootstrap]: Bootstrap components written in pure AngularJS by the AngularUI Team. No jQuery required.
* http://ionicframework.com[Ionic]: Offers a library of mobile-optimized HTML, CSS, and JavaScript components, gestures,
and tools for building highly interactive apps. Built with Sass and optimized for AngularJS. Provides a native look and feel.
* https://github.com/jirikavi/AngularJS-Toaster[AngularJS-Toaster]: An AngularJS port of the http://codeseven.github.io/toastr/[Toastr] non-blocking notification
jQuery library.

=== Internationalization (i18n)
Internationalization (also called i18n because the word has 18 letters between "i" and "n") is a first-class citizen in
JHipster. Translating an application to another language is easiest if you put the i18n system in place at the beginning of
a project. https://angular-translate.github.io/[Angular Translate] provides directives that make it easy to translate
your application into multiple languages.

To use Angular Translate, you simply add a "translate" attribute with a key.

[source,html]
----
<label translate="user.firstname">First Name</label>
----

The key references a JSON document, which will return the translated string. AngularJS will then replace the "First Name"
string with the translated version.

JHipster installs English and French translations when you first create a project. It stores the JSON documents
for these languages in `src/main/webapp/i18n`, in `en` and `fr` directories. You can install additional languages using
`yo jhipster:languages`. At the time of this writing, JHipster supports 14 additional languages. You can also add a new
language. To set the default language, modify `src/main/webapp/scripts/app/app.js` and its preferred language line.

[source,javascript]
----
$translateProvider.preferredLanguage('de');
----

=== Sass
Sass stands for "Syntactically Awesome StyleSheets". It's a language for writing CSS with the goodies you're used to
using in modern programming languages, such as variables, nesting, mixins, and inheritance. Sass uses the `$` symbol
to indicate a variable, which can then be referenced later in your document.

[source,sass]
----
$font-stack:    Helvetica, sans-serif
$primary-color: #333

body
    font: 100% $font-stack
    color: $primary-color
----

Sass 3 introduces a new syntax known as SCSS that is fully compatible with the syntax of CSS3, while still supporting
the full power of Sass. It looks more like CSS.

[source,sass]
----
$font-stack:    Helvetica, sans-serif;
$primary-color: #333;

body {
    font: 100% $font-stack;
    color: $primary-color;
}
----

The code above renders the following CSS.

[source,css]
----
body {
    font: 100% Helvetica, sans-serif;
    color: #333;
}
----

Another powerful feature of Sass is the ability to write nested CSS selectors. When writing HTML, you can often visualize
the hierarchy of elements. Sass allows you to bring that hierarchy into your CSS.

[source,sass]
----
nav {
    ul {
        margin: 0;
        padding: 0;
        list-style: none;
    }

    li {
        display: inline-block;
    }

    a {
        display: block;
        padding: 6px 12px;
        text-decoration: none;
    }
}
----

WARNING: Overly nested rules will result in over-qualified CSS that can be hard to maintain.

As mentioned, Sass also supports partials, imports, mixins, and inheritance. Mixins can be particularly
useful for handling vendor prefixes.

[source,sass]
----
@mixin border-radius($radius) { <1>
    -webkit-border-radius: $radius;
       -moz-border-radius: $radius;
        -ms-border-radius: $radius;
            border-radius: $radius;
}

.box { @include border-radius(10px); } <2>
----
<1> Create a mixin using `@mixin` and give it a name. This uses `$radius` as a variable to set the radius value.
<2> Use `@include` followed by the name of the mixin.

CSS generated from the above code looks as follows.

[source,css]
----
.box {
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    -ms-border-radius: 10px;
    border-radius: 10px;
}
----

Bootstrap is written with http://lesscss.org/[Less], a CSS pre-processor with similar features to Sass. However, its
founders have https://twitter.com/mdo/status/591364406816079873[announced] that they'll be using SCSS for the 4.0
version.

JHipster allows you to use Sass by integrating http://compass-style.org/[Compass]. To learn more about structuring your
CSS and naming classes, read the great https://smacss.com/[__Scalable and Modular Architecture for CSS__].

=== Grunt versus Gulp
JHipster prompts you to choose between http://gruntjs.com/[Grunt] and http://gulpjs.com/[Gulp] for building the client.
Both tools allow you to perform tasks like minification, concatenation, compilation (e.g. from TypeScript/
CoffeeScript to JavaScript), unit testing, and more.

==== Grunt
Grunt calls itself "the JavaScript task runner". It's the incumbent in the field of JavaScript build tools and has
over 4,000 http://gruntjs.com/plugins[plugins]. You install and manage Grunt and Grunt plugins via https://www.npmjs.com/[npm],
a package manager for https://nodejs.org/[Node.js]. You can install anything specified as a dependency in
your project's `package.json` using `npm install`. To install Grunt globally (so you can use it
anywhere), run `npm install -g grunt-cli`.

Grunt was created by Ben Alman, who http://bocoup.com/weblog/introducing-grunt/[first released it March 29, 2012].

// http://gruntjs.com/plugins: 4,631
// http://gulpjs.com/plugins/: 1547

The following steps show how to integrate Grunt into https://github.com/angular/angular-seed[angular-seed]. This particular
build file optimizes your JavaScript, CSS, and HTML for production. It concatenates your JavaScript and CSS
files, minifies them, then replaces the references in the HTML to point to the optimized files. First, you have
to configure `package.json` to include Grunt and its plugins for web optimization.

[source,json]
.package.json
----
include::{sourcedir}/chapter3/grunt/package.json[]
----

Then, you have to write a `Gruntfile.js` that configures each of the different tasks for the project.

[source,javascript]
.Gruntfile.js
----
include::{sourcedir}/chapter3/grunt/Gruntfile.js[]
----

Before the tasks run, the `index.html` file points to individual CSS and JavaScript files. The `<!-- build:* -\->`
and `<!-- endbuild -\->` are used by the `useminPrepare` task  to build the list of files for optimization.

[source,html]
.index.html
----
include::{sourcedir}/chapter3/grunt/index-dev.html[]
----

After the build runs, the `dist/index.html` file points to the revved, combined, and minified CSS and JavaScript files.

[source,html]
.dist/index.html
----
include::{sourcedir}/chapter3/grunt/index-prod.html[]
----

// http://www.justinmccandless.com/blog/A+Tutorial+for+Getting+Started+with+Gulp
// https://www.npmjs.com/package/gulp-usemin
// https://blog.engineyard.com/2014/frontend-dependencies-management-part-2
// https://medium.com/@preslavrachev/gulp-vs-grunt-why-one-why-the-other-f5d3b398edc4

==== Gulp
Gulp calls itself "the streaming build system". Gulp is all about streams and building complex pipelines with ease.
It uses Node.js's streams, and executes faster than Grunt, since it does not open/close files or create intermediary copies. Gulp
was released a couple of years after Grunt, and has received a lot of praise from the JavaScript community. In accordance
with the UNIX philosophy, Gulp plugins each try to do one thing well.

To compare Gulp versus Grunt, I integrated it into the angular-seed project. Below are the `package.json` and `gulpfile.js`
that optimize everything for production. The input and resulting HTML are the same as they were for the Grunt example.

[source,json]
.package.json
----
include::{sourcedir}/chapter3/gulp/package.json[]
----

[source,javascript]
.gulpfile.js
----
include::{sourcedir}/chapter3/gulp/gulpfile.js[]
----

You can see from this example that Gulp is a bit more concise. However, both tools have their merits. Gulp is the newcomer
so it can be a bit more nimble without the need for backwards compatibility. It also has many fewer
http://gulpjs.com/plugins/[plugins] (just over 1,500 at the time of this writing). If you compare Grunt and Gulp at Google Trends,
you'll see that Gulp received a spike of hype when it first came out but that Grunt has usually led by a slight
margin.

[[img-bootstrap-advanced-grid-desktop]]
.Google Trends: Grunt vs. Gulp
image::chapter3/grunt+gulp/google-trends-grunt-vs-gulp.png[.Google Trends: Grunt vs. Gulp, 864, scaledwidth="100%"]

// https://www.google.com/trends/explore#q=Grunt%2C%20Gulp

To learn more, see Mark Dalgleish's http://markdalgleish.github.io/presentation-build-wars-gulp-vs-grunt/[Build Wars]
presentation, delivered at MelbJS in Melbourne, Australia, February 12, 2014. I asked Mark
what he thought of these two tools today. He recommended http://webpack.github.io/[webpack] and reading his more recent
https://medium.com/seek-ui-engineering/block-element-modifying-your-javascript-components-d7f99fcab52b["Block, Element,
Modifying Your JavaScript Components"] article. Since webpack is not an option for JHipster, I will not cover it in this book.

(Keith Cirkel
recommends you use http://blog.keithcirkel.co.uk/why-we-should-stop-using-grunt/[neither Grunt nor Gulp but use npm].)

If you're new to JavaScript build tools, I recommend Grunt. You don't want to be overwhelmed with
too much new technology in your JHipster project if you're trying to meet a deadline. If you're using JHipster to learn
about a bunch of new technologies, try Gulp, which seems to be the hipper option.

=== WebSockets
WebSockets is an advanced technology that makes it possible to open an interactive communication channel between the
user's browser and a server. With this API, you can send messages to a server and receive event-driven responses
without having to poll the server for a reply. WebSockets have been called "TCP for the Web".

If you choose to use WebSockets in a JHipster project, you'll get two JavaScript libraries added to your project.

* http://jmesnil.net/stomp-websocket/doc/[STOMP WebSocket]: STOMP stands for "simple text-orientated messaging protocol"
* https://github.com/sockjs/sockjs-client[SockJS]: SockJS provides a WebSocket-like object. If native WebSockets are
not available, it falls back to other browser techniques.

To see how WebSockets work, take a look at the `TrackerController` in a WebSockets-enabled project. This displays real-time
activity information that's been posted to the `/websocket/tracker` endpoint.

[source,javascript]
.src/main/webapp/scripts/app/admin/tracker/tracker.controller.js
----
include::{sourcedir}/chapter3/websockets/tracker.controller.js[]
----

The `Tracker` service allows you to send tracking information, for example, to track when someone has authenticated.

[source,javascript]
.src/main/webapp/scripts/components/tracker/tracker.service.js
----
include::{sourcedir}/chapter3/websockets/tracker.service.js[]
----

WebSockets on the server side of a JHipster project are implemented with http://docs.spring.io/spring/docs/current/spring-framework-reference/html/websocket.html[Spring's WebSocket support]. The next section shows how a developer productivity tool that uses WebSockets implements something very cool.

=== Browsersync

http://www.browsersync.io/[Browsersync] is one of those tools that makes you wonder how you ever lived without it. It
keeps your assets in sync with your browser. It's also capable of syncing browsers, so you can, for example, scroll in
Safari and watch synced windows scroll in Chrome and in Safari running in iOS Simulator. When you save
files, it updates your browser windows, saving you an incredible amount of time. As its website says:
"It's wicked-fast and totally free."

Browsersync is free to run and reuse, as guaranteed by its open-source Apache 2.0 License. It contains a number of slick features:

* Interaction sync: It mirrors your scroll, click, refresh, and form actions between browsers while you test.
* File sync: Browsers automatically update as you change HTML, CSS, images, and other project files.
* URL history: Records your test URLs so you can push them back out to all devices with a single click.
* Remote inspector: Remotely tweak and debug webpages that are running on connected devices.

To integrate Browsersync in your project, you need a `package.json` and `Gruntfile.js`. Your `package.json` file only needs
to contain a few things, weighing in at a slim 15 lines of JSON.

[source,javascript]
----
include::{sourcedir}/../../../package.json[]
----

The `Gruntfile.js` utilizes the tools specified in `package.json` to enable Browsersync and create a magical web-development
experience.

[source,javascript]
----
include::{sourcedir}/../../../Gruntfile.browsersync.js[]
----

After you've created these files, you'll need to install https://nodejs.org/[Node.js] and its package manager, npm. This
should let you run the following command to install Browsersync and Grunt. You will only need to run this command when
dependencies change in `package.json`.
----
npm install
----

Then run the following command to create a blissful development environment in which your browser auto-refreshes when files change
on your hard drive.
----
grunt serve
----

For an audiovisual introduction to Browsersync, check out the introduction video on its http://www.browsersync.io/[homepage].

JHipster integrates Browsersync for you, using JavaScript that looks very similar to what you see above. I highly recommend
Browsersync for your project. It's useful for determining if your web application can handle a
page reload without losing the current user's state.

=== Summary

This section describes the UI components in a typical JHipster project. It taught you about the extremely popular JavaScript MVC framework called AngularJS. It showed you how to author HTML pages and use Bootstrap to make things look pretty. A build tool is essential for building a modern web application and it showed you how you can use Grunt and Gulp. Finally, it showed you how WebSockets work and described the beauty of BrowserSync.

Now that you've learned about many of the UI components in a JHipster project, let's learn about the API side of things.
