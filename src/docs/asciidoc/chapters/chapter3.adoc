
=== AngularJS
AngularJS (Angular) is the MVC framework used by JHipster. It's written in JavaScript and makes you a hipster just by using it.
I've been tracking statistics on jobs and skills for JavaScript MVC frameworks ever since I Compared JVM Web Frameworks
at Devoxx France in 2013. At that time, Backbone was the dominant framework.

[.clearfix]
--
[.left]
[[img-angular-jobs-2013]]
.Jobs on Dice.com, March 2013
image::chapter3/angular/dice-jobs-march2013.png[Jobs on Dice in 2013, 450, scaledwidth="75%"]
[.left]
[[img-angular-skills-2013]]
.Skills on LinkedIn, March 2013
image::chapter3/angular/linkedin-skills-march2013.png[Skills on LinkedIn in 2013, 450, scaledwidth="75%"]
--

In February 2014, I updated those statistics for a presentation. Angular had a similar amount of jobs as Backbone and
a lot of people added it to their LinkedIn profiles. I found that Ember had grown around 300%, Backbone 200% and Angular
1000%!

[.clearfix]
--
[.left]
[[img-angular-jobs-2014]]
.Jobs on Dice.com, February 2014
image::chapter3/angular/dice-jobs-february2014.png[Jobs on Dice in 2014, 450, scaledwidth="75%"]
[.left]
[[img-angular-skills-2014]]
.Skills on LinkedIn, February 2014
image::chapter3/angular/linkedin-skills-february2014.png[Skills on LinkedIn in 2014, 450, scaledwidth="75%"]
--

In March 2015, I updated these statistics once again. I found the number of jobs for Angular had doubled in the last
year, while jobs for Ember and Backbone have fallen slightly. As far as skills, developers learning Ember and Backbone has
increased 200%, while skilled Angular folks has risen 400%.

Angular rapidly became the most popular MVC web framework over the last few years. Like Struts in the early 2000s and
Rails in the mid-2000s, it's changed the way developers write web applications. Today, data is exposed via REST APIs and UIs
are written in JavaScript. As a Java developer, I was immediately attracted to Angular when I saw its seperation of concerns.
It recommended organizing your application into several different components:

* Controllers: JavaScript functions that retrieve data from services and expose it to templates using `$scope`.
* Services: JavaScript functions that make HTTP calls to a JSON API.
* Templates: HTML pages that display data. Uses Angular directives to iterate over collections and show/hide elements.
* Filters: Data manipulation tools that can transform data (e.g. uppercase, lowercase, ordering and searching).
* Directives: HTML processors that allow components to be written. Similar to JSP tags.

==== History
AngularJS was started by Miško Hevery in 2009. He was working on a project that was using GWT. Three developers had been
developing the product for six months and Miško rewrote the whole thing in Angular in three weeks. At that time, Angular
was a side project he'd created. It didn't require you to write much in JavaScript, most of the logic could be programmed
in HTML. The GWT version of the product contained 17,000 lines of code. The Angular version was only 1000 lines of code!

==== The Basics
Creating Hello World with Angular is pretty simple.
[source,html,linenums]
----
<!doctype html>
<html ng-app>
<head>
    <title>Hello World</title>
</head>
<body>
<div>
    <label>Name:</label>
    <input type="text" ng-model="name" placeholder="Enter a name here">
    <hr>
    <h1>Hello {{name}}!</h1>
</div>
<script src="http://code.angularjs.org/1.3.11/angular.min.js"></script>
</body>
</html>
----

In this example, `ng-model` maps to the value displayed in `{{name}}`. When using jQuery to do something similar, you
have to add an event handler that listens for the value to change. With Angular, the two-way binding is done for you
and it saves you from writing a lot of boilerplate code. The `{{ng-app}}` directive on line 2 makes this an Angular
application.

The Model-View-Controller pattern is common for web frameworks to implement. With Angular, the model is represented
by a JavaScript object that you create or retrieve from a service. The view is an HTML template and the controller
is a JavaScript function that watches for changes to the model from the user.

[[img-angular-mvc]]
.MVC in Angular
image::chapter3/angular/angular-mvc.png[MVC in Angular, 500, scaledwidth="75%", align=center]

Below is a search controller and a service to fetch search results. It's expected that a JSON endpoint exists at
`/api/search` on the same server.

[source,javascript,linenums]
----
.controller('SearchController', function () {
    console.log("In Search Controller...");
})

.factory('SearchService', function ($http) {
    var service = {
        query: function (term) {
            return $http.get('/api/search/' + term);
        }
    };
    return service;
});
----

To make this controller available at a URL, you can use Angular's ngRoute.

[source,javascript,linenums]
----
angular.module('myApp.search', ['ngRoute'])

    .config(['$routeProvider', function ($routeProvider) {
        $routeProvider
            .when('/search', {
                templateUrl: 'search/index.html',
                controller: 'SearchController'
            })
    }])
----

The template at `search/index.html` can be as simple as a form with a button.

[source,html,linenums]
----
<form ng-submit="search()">
    <input type="search" name="search" ng-model="term">
    <button>Search</button>
</form>
----

To get the results from the SearchService in your controller, you can use Angular's dependency injection.

[source,javascript,linenums]
----
.controller('SearchController', function ($scope, SearchService) { <1>
    $scope.search = function () { <2>
        console.log("Search term is: " + $scope.term); <3>
        SearchService.query($scope.term).then(function (response) {
            $scope.searchResults = response.data;
        });
    };
})
----
<1> To inject SearchService into SearchController, simply add it as a parameter to the controller's argument list.
<2> `$scope.search()` is a function that's called from HTML `<form>`, wired up using the `ng-submit` directive.
<3> `$scope.term` is a variable that's wired to `<input>` using the `ng-model` directive.

Another common way to write controllers is to name the arguments passed into the function. This helps if you plan
to obfuscate your code.

TIP: Angular allows you to bind data to its `$scope` object. It represents your application's model. There's also a `$rootScope`
object that can be used to share data between components. Scopes are built in a hierarchical structure which mimics the
DOM structure. Scopes can watch expressions and propagate events.

[source,javascript,linenums]
----
.controller('SearchController', ['$scope', 'SearchService', function ($scope, SearchService) {
    ...
}]);
----

To make the aforementioned module work, you need an HTML page that includes Angular and ngRoute.

[source,html,linenums]
----
<!DOCTYPE html>
<html ng-app="myApp"> <1>
<head lang="en">
    <meta charset="UTF-8">
    <title>My AngularJS App</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
<ul class="menu">
    <li><a href="#/search">search</a></li>
</ul>

<div ng-view></div> <2>

<script src="http://code.angularjs.org/1.3.11/angular.min.js"></script>
<script src="http://code.angularjs.org/1.3.11/angular-route.min.js"></script>
<script src="app.js"></script> <3>
<script src="search/search.js"></script>
</body>
</html>
----
<1> The `ng-app` directive tells Angular the name of your app.
<2> `ng-view` is there your rendered template is displayed.
<3> `app.js` contains your application's definition.

[source,javascript,linenums]
.app.js
----
'use strict'; <1>

// Declare app level module which depends on views, and components
angular.module('myApp', ['ngRoute', 'myApp.search'])
.config(['$routeProvider', function($routeProvider) {
    // default URL to route to
    $routeProvider.otherwise({redirectTo: '/search'});
}]);
----
<1> ECMAScript 5's strict mode is a way to _opt in_ to a restricted variant of JavaScript. It causes your browser to
have better error reporting and performance.

If your API returned data like the following:

[source,json,linenums]
----
include::{sourcedir}/chapter3/angular/search-results.json[]
----

You could display it in `search.html` with Angular's `ng-repeat` directive.

[source,html,linenums]
----
<table ng-show="searchResults.length" class="table">
    <thead>
    <tr>
        <th>Name</th>
        <th>Phone</th>
        <th>Address</th>
    </tr>
    </thead>
    <tbody>
    <tr ng-repeat="person in searchResults">
        <td>{{person.name}}</td>
        <td>{{person.phone}}</td>
        <td>{{person.address.street}}<br/>
            {{person.address.city}}, {{person.address.state}} {{person.address.zip}}
        </td>
    </tr>
    </tbody>
</table>
----

To read a more in-depth example (including source code) of building search and edit application with Angular, see
http://raibledesigns.com/rd/entry/getting_started_with_angularjs[my article on Getting Started with AngularJS].

==== UI-Router
The UI-Router is an important piece.

=== Bootstrap

http://getbootstrap.com/[Bootstrap] is a CSS framework that simplifies the development of web applications. It provides a
number of CSS classes and HTML structures that allow you to develop HTML user interfaces that look good by default. Not
only that, but its 3.0 version is responsive by default, which means it works better (or even best) on a mobile device.

==== The Grid System

Most CSS frameworks provide a grid system that allows you to position columns and cells in a respectable way. Bootstrap's
basic grid system is built with containers, rows and columns. It's 12 columns wide, comprised of 940 pixels (px). The grid
adapts to be 724px and 1170px wide depending on your viewport. On viewports less than 767 pixels, the columns become
fluid and stack vertically.

A basic example of the grid:

[source,html,linenums]
----
include::{sourcedir}/chapter3/bootstrap/grid-basic.html[]
----

When rendered with Bootstrap's CSS, the above HTML looks as follows on a desktop. The min-width of the container element
on the desktop is set to 1200px.

[[img-bootstrap-basic-grid-desktop]]
.Basic Grid on Desktop
image::chapter3/bootstrap/basic-grid-desktop.png[Basic Grid on Desktop, 991, scaledwidth="100%"]

If you squish your browser so it's less than 1200px wide, or render this same document on a smaller screen, the columns
will stack.

[[img-bootstrap-basic-grid-mobile]]
.Basic Grid on a Mobile Device
image::chapter3/bootstrap/basic-grid-mobile.png[Basic Grid on Mobile, 768, scaledwidth="75%"]

Bootstrap's grid can be used to align and position elements, widgets and features of your application. It's helpful
to understand a few basics if want to use it effectively.

* It's based on 12 columns
* Just use 'md' and fix as needed
* It can be used to size input fields

Bootstrap 3's grid system has four tiers of classes: xs (phones), sm (tablets), md (desktops), and lg (larger desktops).
You can use nearly any combination of these classes to create more dynamic and flexible layouts. Below is an example of a
grid that's a little more advanced.

Each tier of classes scales up, meaning if you plan on setting the same widths for xs and sm, you only need to specify xs.

[source,html,linenums]
----
include::{sourcedir}/chapter3/bootstrap/grid-advanced.html[]
----

[[img-bootstrap-advanced-grid-desktop]]
.Advanced Grid
image::chapter3/bootstrap/advanced-grid-desktop.png[Advanced Grid, 983, scaledwidth="100%"]

You can use size indicators to specify breakpoints in the columns. Breakpoints specify where a column wraps onto the next
row. In the HTML above, 'md' is the size indicator. Boostrap supports 'xs', 'sm', 'md', 'lg' and 'xl'.

==== Responsive Utility Classes
Bootstrap also includes a number of utility classes that can be used to show and hide elements based on browser size.

* `.visible-[xs|sm|md|lg]`
* `.hidden-[xs|sm|md|lg]`

==== Forms
When you add Bootstrap's CSS to your web application, chances are it'll start to look better quickly. Typography, margins,
and padding will look better by default. However, your forms might look funny. This is because Bootstrap requires a few
classes on your form elements to make them look good. Below is an example of a form element.

[source,html,linenums]
----
include::{sourcedir}/chapter3/bootstrap/basicelement.html[]
----

[[img-bootstrap-basic-element]]
.Basic Form Element
image::chapter3/bootstrap/basicelement.png[Basic Form Element, 829, scaledwidth="90%"]

If you'd like to indicate this form element is not valid, you'll need to modify the above HTML to display validation warnings.

[source,html,linenums]
----
include::{sourcedir}/chapter3/bootstrap/basicelement-withvalidation.html[]
----

[[img-bootstrap-basic-element-with-validation]]
.Form Element with Validation
image::chapter3/bootstrap/basicelement-validation.png[Invalid Form Element, 829, scaledwidth="90%"]

==== CSS
When you add Bootstrap's CSS to an HTML page, the default settings for typography improves right away. Your `<h1>` and `<h2>`
headings become semi-bold and are sized accordingly. Your paragraph margins, body text and blockquotes will look better.
If you want to align text in your pages, `text-[left|center|right]` are useful classes. For tables, adding a `table` class
gives them a better look-and-feel by default.

To make your buttons look better, Bootstrap provides `btn` and a number of `btn-*` classes.

[source,html,linenums]
----
include::{sourcedir}/chapter3/bootstrap/buttons.html[]
----

[[img-bootstrap-buttons]]
.Buttons
image::chapter3/bootstrap/buttons.png[Buttons, 500, scaledwidth="55%"]

==== Components
Bootstrap ships with a number of components out-of-the-box. Some require JavaScript, some only require HTML5 markup and
CSS classes to work. Its rich set of components have helped make it the most popular project on GitHub. Web developers
have always liked components in their frameworks. A framework that offers easy-to-use components often requires developers
to write less code. Less code to write means there's less code to maintain!

Some popular Bootstrap components include: dropdowns, button groups, button dropdowns, navbar, breadcrumbs, pagination,
alerts, progress bars and panels. Below is an example of a navbar with a dropdown.

[[img-bootstrap-navbar]]
.Navbar with Dropdown
image::chapter3/bootstrap/navbar-with-dropdown.png[Navbar, 867, scaledwidth="100%"]

When rendered on a mobile device, everything collapses into a hamburger menu that can be expanded downward.

[[img-bootstrap-navbar-mobile]]
.Navbar on Mobile
image::chapter3/bootstrap/navbar-on-mobile.png[Navbar, 467, scaledwidth="50%"]

This navbar requires quite a bit of HTML markup, so it's not shown here for the sake of brevity. You can view this source
online in http://getbootstrap.com/components/#navbar-default[Bootstrap's documentation]. A simpler example is below that
shows the basic structure.

[source,html,linenums]
----
include::{sourcedir}/chapter3/bootstrap/navbar.html[]
----

Alerts are useful for displaying feedback to the user. Different colors are made possibly with different classes. You'll need
to add an `alert` class, plus `alert-[success|info|warning|danger]` to indicate the colors.

[source,html,linenums]
----
include::{sourcedir}/chapter3/bootstrap/alerts.html[]
----

This renders alerts like the ones you see in below:

[[img-bootstrap-alerts]]
.Alerts
image::chapter3/bootstrap/alerts.png[Alerts, 828, scaledwidth="100%"]

To make an alert closeable, you need to add an `.alert-dismissible` class and a close button.

[source,html,linenums]
----
<div class="alert alert-warning alert-dismissible" role="alert">
  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
  <strong>Warning!</strong> Better check yourself, you're not looking too good.
</div>
----

[[img-bootstrap-alert-dismissable]]
.Closeable Alert
image::chapter3/bootstrap/alert-dismissable.png[Dismissable Alert, 830, scaledwidth="100%"]

TIP: To make links in your alerts match the colors of the alert, use `.alert-link`.

==== Icons
Icons have always been a big part of essential part of web applications. Showing the user a small image is often sexier,
and hipper, than plain text. Humans are visual beings and icons are a great way to _spice things up a bit_. In the last
several years, font icons have become very popular for web development. Font icons are just fonts, but they contain
symbols and glyphs instead of text. You can style, scale and load them quickly because of their small size.

http://glyphicons.com/[GLYPHICONS] Halflings is a set of font icons included with Bootstrap. They're not normally free,
but their creator has made them free for Bootstrap users. There are over 250 glyphs included in this set. They're often
used to display eye candy on buttons.

[source,html]
----
<button class="btn btn-info"><i class="glyphicon glyphicon-plus"></i> Add</button>
<button class="btn btn-danger"><i class="glyphicon glyphicon-minus"></i> Delete</button>
<button class="btn btn-default"><i class="glyphicon glyphicon-pencil"></i> Edit</button>
----

You can see how the icons change color based on the font color defined for the element they're inside.

[[img-bootstrap-buttons-icons]]
.Buttons with icons
image::chapter3/bootstrap/buttons-with-icons.png[Buttons with icons, 241, scaledwidth="25%"]

There are other font icons you can use with Bootstrap and JHipster, http://fortawesome.github.io/Font-Awesome/[Font Awesome]
being one of the most popular. It's completely free for commercial use and contains over 500 icons. JHipster uses
Font Awesome for its website, but not for generated projects. The
https://github.com/jhipster/generator-jhipster/issues/978#issuecomment-69988321[reason] for not including it is because
glyphicons are the default and it's easy to change your the font icons in your project. Simply add it as a dependency
in your `bower.json` file.

=== i18n
=== Sass
=== Grunt vs. Gulp.js
=== WebSockets
=== BrowserSync

http://www.browsersync.io/[BrowserSync] is one of those tools that make you wonder how you ever lived without them. It's a program that
keeps your assets in sync with your browser. It's also capable of syncing browsers, so you can scroll in
Safari and watch a Chrome window scroll, along with a Safari window running in iOS Simulator. When you save
files, it updates your browser windows, saving you an incredible amount of time. As its website says:
"It's wicked-fast and totally free".

BrowserSync is free to run and reuse, as guaranteed by its open source Apache 2.0 License. It contains a number of slick features:

* Interaction sync: Your scroll, click, refresh and form actions are mirrored between browsers while you test.
* File sync: Browsers are automatically updated as you change HTML, CSS, images and other project files.
* URL history: Records your test URLs so you can push them back out to all devices with a single click.
* Remote inspector: Remotely tweak and debug web pages that are running on connected devices.
////
* Browser support: Instantly sync between your desktop, tablet and phone. Perfect for coding responsive designs.
* Build-tool compatible: Easily integrated with task runners like Grunt and Gulp, or included in other Node projects.
* Install and run anywhere: Built on Node.js to support Windows, MacOS and Linux. Setup in less than 5 minutes.
////

To integrate BrowserSync in your project, you need a `package.json` and `Gruntfile.js`. Your `package.json` file only needs
to contain a few things, weighing in at a slim 15 lines of JSON.

[source,javascript,linenums]
----
include::{sourcedir}/../../../package.json[]
----

The `Gruntfile.js` utilizes the tools specified in `package.json` to enable BrowserSync and create a magical web development
experience.

[source,javascript,linenums]
----
include::{sourcedir}/../../../Gruntfile.browsersync.js[]
----

After you've created these files, you'll need to install https://nodejs.org/[Node] and its package manager (NPM). Then you
should be able to run the following command to install BrowserSync and Grunt. You will only need to run this command when
dependencies change in `package.json`.
----
npm install
----
You may have to install http://gruntjs.com/[Grunt] as well. Install the grunt command-line tool globally with:
----
npm install -g grunt-cli
----
Then run the following command to create a blissful development experience where your browser auto-refreshes when files change
on your hard drive.
----
grunt serve
----
For an audio visual introduction to BrowserSync, check out the introduction video on its http://www.browsersync.io/[homepage].

JHipster integrates BrowserSync for you, using JavaScript similar that looks very similar to what you see above. Integrating
BrowserSync into your project is highly recommended. It's also useful for determining if your web application can handle a
page reload without losing the current user's state.
