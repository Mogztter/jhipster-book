:imagesdir: ../images

[[jhipsters-ui-components]]
= JHipster\'s UI components

A modern web application has many UI components. It likely has some sort of model-view-controller (MVC) framework as well as a
CSS framework, and tooling to simplify the use of these. With a web application, you can have users all over the globe,
so translating your application into other languages might be important. If you're developing large amounts of CSS,
you'll likely use a CSS pre-processor like Less or Sass. Then you'll need a build tool to refresh your browser,
run your pre-processor, run your tests, minify your web assets, and prepare your application for production.

This section shows how JHipster includes all of these UI components for you and makes your developer experience a joyous one.

== Angular
JHipster supports two UI frameworks: AngularJS and Angular. It will also support React by the end of 2017. In the first
two versions of this book, I showed you how to use AngularJS. In this version, I'll show you how to use Angular. You can
see from the following graphs that Angular and React are the most popular among JavaScript frameworks.

[.clearfix]
--
[.left]
[[img-angular-jobs-2017]]
.Jobs on Indeed, August 2017
image::chapter3/angular/indeed-jobs-aug2017.jpg[Jobs on Indeed, 450, scaledwidth=75%]
[.left]
[[img-angular-skills-2013]]
.Stack Overflow Tags, August 2017
image::chapter3/angular/stackoverflow-tags-aug2017.jpg[Tags on Stack OverFlow, 450, scaledwidth=75%]
--

Angular is the default UI framework used by JHipster. It's written in TypeScript, compiles to JavaScript, and just using
it makes you a hipster! Like Struts in the early 2000s and Rails in the mid-2000s, Angular (and other JavaScript frameworks)
have changed the way developers write web applications. Today, data is exposed via REST APIs and UIs are written in
JavaScript (or TypeScript). As a Java developer, I was immediately attracted to Angular when I saw its separation of concerns.
It recommended organizing your application into several different components:

* Components: Classes that retrieve data from services and expose it to templates.
* Services: Classes that make HTTP calls to a JSON API.
* Templates: HTML pages that display data. Use Angular directives to iterate over collections and show/hide elements.
* Pipes: Data-manipulation tools that can transform data (e.g. uppercase, lowercase, ordering, and searching).
* Directives: HTML processors that allow components to be written. Similar to JSP tags.

=== History

AngularJS was started by Miško Hevery in 2009. He was working on a project that was using GWT. Three developers had been
developing the product for six months, and Miško rewrote the whole thing in AngularJS in three weeks. At that time, AngularJS
was a side project he'd created. It didn't require you to write much in JavaScript as you could program most of the logic
in HTML. The GWT version of the product contained 17,000 lines of code. The AngularJS version was only 1,000 lines of code!

In October 2014, the AngularJS team announced they were building http://www.infoq.com/news/2014/10/angular-2-atscript[Angular
2.0]. The announcement led to a bit of upheaval in the Angular developer community. The API for writing
Angular applications was going to change and it was to be based on a new language, AtScript. There would be no migration
path and users would have to continue using 1.x or rewrite their applications for 2.x.

A new syntax was introduced that binds data to element properties, not attributes. The advantage of this syntax
is it allows you to use any web component in an Angular app, not just those retrofitted to work with Angular.

[source,html]
----
<input type="text" [value]="firstName">
<button (click)="addPerson()">Add</button>
<input type="checkbox" [checked]="someProperty">
----

In March 2015, the Angular team http://www.infoq.com/news/2015/03/angular-2-concerns-addressed[addressed community concerns],
announcing that they would be using http://www.typescriptlang.org/[TypeScript] over AtScript and that they would provide
a migration path for Angular 1.x users. They also adopted semantic versioning and http://angularjs.blogspot.com/2017/01/branding-guidelines-for-angular-and.html[recommended people call it "Angular"
instead of Angular 2.0].

Angular 2.0 was released September 2016. Angular 4.0 was released in March 2017. https://jhipster.github.io/2017/07/06/jhipster-release-4.6.0.html[JHipster 4.6.0] was released on July 6, 2017 and contains production-ready Angular support. Prior to that, JHipster's
Angular support was considered beta quality.

The Angular project is hosted at https://angular.io/[https://angular.io].

=== Basics
Creating a component that says "Hello World" with Angular is pretty simple.

[source,typescript]
----
import { Component } from '@angular/core';

@Component({
  selector: 'my-app',
  template: `<h1>Hello {{name}}</h1>`
})
export class AppComponent {
  name = 'World';
}
----

In this example, the `name` variable in the component maps to the value displayed in `+{{name}}+`. To make this component
render on a page, you'll need a few more files: a module definition, a bootstrapping class, and an HTML file. A basic
module definition contains component declarations, imports, providers, and a class to bootstrap.

[source,typescript]
----
import { BrowserModule } from '@angular/platform-browser';
import { NgModule } from '@angular/core';
import { AppComponent } from './app.component';

@NgModule({
  declarations: [
    AppComponent
  ],
  imports: [
    BrowserModule
  ],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule { }
----

Then you'll need a bootstrap file, typically named `main.ts`. This file bootstraps the module.

[source,typescript]
----
import { enableProdMode } from '@angular/core';
import { platformBrowserDynamic } from '@angular/platform-browser-dynamic';

import { AppModule } from './app/app.module';
import { environment } from './environments/environment';

if (environment.production) {
  enableProdMode();
}

platformBrowserDynamic().bootstrapModule(AppModule);
----

Finally, you'll need a basic HTML file that renders the component.

[source,html]
----
<html>
<head>
    <title>Howdy</title>
</head>
<body>
    <my-app></my-app>
    <script src="path/to/compiled/javascript.js"></script>
</body>
</html>
----

The MVC pattern is a common one for web frameworks to implement. With Angular, the model is represented
by an object that you create or retrieve from a service. The view is a HTML template and the component
is a class that sets variables to be read by the template.

[[img-angular-mvc]]
.MVC in Angular
image::chapter3/angular/angular-mvc.png[MVC in Angular, 500, scaledwidth=75%, align=center]

Below is a `SearchService` to fetch search results. It's expected that a JSON endpoint exists at `/api/search` on
the same server.

[source,typescript]
.SearchService
----
import { Injectable } from '@angular/core';
import { Http, Response } from '@angular/http';
import 'rxjs/add/operator/map';
import { Observable } from 'rxjs';

@Injectable()
export class SearchService {

  constructor(private http: Http) {}

  search(term): Observable<any> {
    return this.http.get(`/api/search/${term}`).map((res: Response) => res.json());
  }
}
----

An associated `SearchComponent` can be used to display the results from this service. Notice how you can use
constructor injection to get a reference to the service.

[source,typescript]
.SearchComponent
----
import { Component } from '@angular/core';
import { SearchService } from '../search.service';

@Component({
  selector: 'app-search',
  templateUrl: './search.component.html',
  styleUrls: ['./search.component.css'],
  providers: [SearchService]
})
export class SearchComponent {
  query: string;
  searchResults: Array<any>;

  constructor(private searchService: SearchService) {
    console.log("In Search Component...");
  }

  search(): void {
    this.searchService.search(this.query).subscribe(
      data => {
        this.searchResults = data;
      },
      error => console.log(error)
    );
  }
}
----

TIP: To see the JavaScript console in Chrome, use kbd:[Command+Option+J] in Mac OS X/MacOS or kbd:[Control+Shift+J] in
Windows or Linux.

To make this component available at a URL, you can use Angular's `Router` and specify the path in the module that includes
the component.

[source,typescript]
.AppModule
----
import { BrowserModule } from '@angular/platform-browser';
import { NgModule } from '@angular/core';
import { FormsModule } from '@angular/forms';
import { HttpModule } from '@angular/http';

import { AppComponent } from './app.component';
import { SearchComponent } from './search/search.component';
import { Routes, RouterModule } from '@angular/router';

const appRoutes: Routes = [
  { path: 'search', component: SearchComponent },
  { path: '', redirectTo: '/search', pathMatch: 'full' }
];

@NgModule({
  declarations: [
    AppComponent,
    SearchComponent
  ],
  imports: [
    BrowserModule,
    FormsModule,
    HttpModule,
    RouterModule.forRoot(appRoutes)
  ],
  providers: [],
  bootstrap: [AppComponent]
})
export class AppModule { }
----

In the main entry point of the app, `AppComponent` in this case, you'll need to specify the router outlet in a template.

[source,html]
.app.component.html
----
<router-outlet></router-outlet>
----

The template for the `SearchComponent` can be as simple as a form with a button.

[source,html]
----
<h2>Search</h2>
<form>
  <input type="search" name="query" [(ngModel)]="query" (keyup.enter)="search()">
  <button type="button" (click)="search()">Search</button>
</form>
----

Now that you've seen the code, let's look at how everything works in the `SearchComponent`.

[source,typescript]
----
@Component({
  selector: 'app-search',
  templateUrl: './search.component.html',
  styleUrls: ['./search.component.css'],
  providers: [SearchService]
})
export class SearchComponent {
  query: string;
  searchResults: Array<any>;

  constructor(private searchService: SearchService) { <1>
    console.log("In Search Component...");
  }

  search(): void { <2>
    this.searchService.search(this.query).subscribe( <3>
      data => {
        this.searchResults = data;
      },
      error => console.log(error)
    );
  }
}

.controller('SearchController', function ($scope, SearchService) { <1>
    $scope.search = function () { <2>
        console.log("Search term is: " + $scope.term); <3>
        SearchService.query($scope.term).then(function (response) {
            $scope.searchResults = response.data;
        });
    };
})
----
<1> To inject `SearchService` into `SearchComponent`, simply add it as a parameter to the components's constructor. Note
that the service has to be listed as a provider in `@Component`, or in `AppModule`. TypeScript makes constructor dependencies
available automatically as class variables.
<2> `search()` is a method that's called from the HTML's `<input>` and `<button>`, wired up using the `(keyup.enter)`
and `(click)` event handlers.
<3> `this.query` is a variable that's wired to `<input>` using the `[(ngModule)]` directive. This syntax provides two-way
binding so if you change the value in the component, it changes it in the rendered HTML. You can think of it this way:
`[] => component to template` and  `() => template to component`.

To make the aforementioned code work, you can generate a new Angular project using https://cli.angular.io[Angular CLI].
To install Angular CLI, you can use Yarn.

[source,bash]
----
yarn add global @angular/cli
----

Then generate a new application using `ng new`.

[source,bash]
----
ng new ng-demo
----

This creates all the files you need for a basic app, installs dependencies, and sets up a build system for compiling
your TypeScript code to JavaScript.

[[img-ng-new]]
.Creating a new Angular project with Angular CLI
image::chapter3/angular/ng-new.png[ng new ng-demo, 1222, scaledwidth=100%]

You can generate the `SearchService` using `ng generate service search` (or `ng g s search`).

[source,bash]
----
$ ng g s search
installing service
  create src/app/search.service.spec.ts
  create src/app/search.service.ts
  WARNING Service is generated but not provided, it must be provided to be used
----

And you can generate the `SearchComponent` using `ng generate component search` (or `ng g c search`).

[source,bash]
----
$ ng g c search
installing component
  create src/app/search/search.component.css
  create src/app/search/search.component.html
  create src/app/search/search.component.spec.ts
  create src/app/search/search.component.ts
  update src/app/app.module.ts
----

Does your API return data like the following?

[source,json]
----
include::{sourcedir}/chapter3/angular/search-results.json[]
----

If so, you could display it in the `search.component.html` template with Angular's `*ngFor` directive.

[source,html]
----
<table *ngIf="searchResults">
  <thead>
  <tr>
    <th>Name</th>
    <th>Phone</th>
    <th>Address</th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let person of searchResults; let i=index">
    <td><a href="" (click)="onSelect(person); false">{{person.name}}</a></td>
    <td>{{person.phone}}</td>
    <td>{{person.address.street}}<br/>
      {{person.address.city}}, {{person.address.state}} {{person.address.zip}}
    </td>
  </tr>
  </tbody>
</table>
----

To read a more in-depth example (including source code and tests) of building a search/edit application with Angular, see
my https://github.com/mraible/ng-demo[Angular and Angular CLI Tutorial].

Now that you've learned a bit about the hottest web framework on the planet, let's take a look at the most popular CSS
framework: Bootstrap.

== Bootstrap

http://getbootstrap.com/[Bootstrap] is a CSS framework that simplifies the development of web applications. It provides a
number of CSS classes and HTML structures that allow you to develop HTML user interfaces that look good by default. Not
only that, but its 3.0 version is responsive by default, which means it works better (or even best) on a mobile device.

=== Bootstrap's grid system

Most CSS frameworks provide a grid system that allows you to position columns and cells in a respectable way. Bootstrap's
basic grid system is built with containers, rows, and columns. It's 940 pixels (px) wide, divided into 12 columns. The grid
adapts to widths of 724 px and 1170 px, according to your viewport. On viewports narrower than 767 px, the columns become
fluid and stack vertically.

A basic example of the grid is shown below.

[source,html]
----
include::{sourcedir}/chapter3/bootstrap/grid-basic.html[]
----

When rendered with Bootstrap's CSS, the above HTML looks as follows on a desktop. The minimum width of the container element
on the desktop is set to 1200 px.

[[img-bootstrap-basic-grid-desktop]]
.Basic grid on desktop
image::chapter3/bootstrap/basic-grid-desktop.png[Basic grid on desktop, 991, scaledwidth=100%]

If you squish your browser to less than 1200 px wide or render this same document on a smaller screen, the columns
will stack.

[[img-bootstrap-basic-grid-mobile]]
.Basic grid on a mobile device
image::chapter3/bootstrap/basic-grid-mobile.png[Basic grid on a mobile device, 768, scaledwidth=75%]

Bootstrap's grid can be used to align and position your application's elements, widgets, and features. It's helpful
to understand a few basics if want to use it effectively.

* It's based on 12 columns.
* Just use "`md`" class and fix as needed.
* It can be used to size input fields.

Bootstrap 3's grid system has four tiers of classes: xs (phones), sm (tablets), md (desktops), and lg (larger desktops).
You can use nearly any combination of these classes to create more dynamic and flexible layouts. Below is an example of a
grid that's a little more advanced.

Each tier of classes scales up, meaning that if you plan to set the same widths for xs and sm, you only need to specify xs.

[source,html]
----
include::{sourcedir}/chapter3/bootstrap/grid-advanced.html[]
----

[[img-bootstrap-advanced-grid-desktop]]
.Advanced grid
image::chapter3/bootstrap/advanced-grid-desktop.png[Advanced grid, 983, scaledwidth=100%]

You can use size indicators to specify breakpoints in the columns. Breakpoints indicate where a column wraps onto the next
row. In the HTML above, "`md`" is the size indicator. Boostrap supports "`xs`", "`sm`", "`md`", "`lg`", and "`xl`".

=== Responsive utility classes
Bootstrap also includes a number of utility classes that can be used to show and hide elements based on browser size, like `.visible-[xs|sm|md|lg]` and `.hidden-[xs|sm|md|lg]`.

=== Forms
When you add Bootstrap's CSS to your web application, chances are it'll quickly start to look better. Typography, margins,
and padding will look better by default. However, your forms might look funny, because Bootstrap requires a few
classes on your form elements to make them look good. Below is an example of a form element.

[source,html]
----
include::{sourcedir}/chapter3/bootstrap/basicelement.html[]
----

[[img-bootstrap-basic-element]]
.Basic form element
image::chapter3/bootstrap/basicelement.png[Basic form element, 829, scaledwidth=90%]

If you'd like to indicate that this form element is not valid, you'll need to modify the above HTML to display validation warnings.

[source,html]
----
include::{sourcedir}/chapter3/bootstrap/basicelement-withvalidation.html[]
----

[[img-bootstrap-basic-element-with-validation]]
.Form element with validation
image::chapter3/bootstrap/basicelement-validation.png[Form element with validation, 829, scaledwidth=90%]

=== CSS
When you add Bootstrap's CSS to a HTML page, the default settings immediately improve the typography. Your `<h1>` and `<h2>`
headings become semi-bold and are sized accordingly. Your paragraph margins, body text, and block quotes will look better.
If you want to align text in your pages, `text-[left|center|right]` are useful classes. For tables, a `table` class
gives them a better look and feel by default.

To make your buttons look better, Bootstrap provides `btn` and a number of `btn-*` classes.

[source,html]
----
include::{sourcedir}/chapter3/bootstrap/buttons.html[]
----

[[img-bootstrap-buttons]]
.Buttons
image::chapter3/bootstrap/buttons.png[Buttons, 500, scaledwidth=55%]

=== Components
Bootstrap ships with a number of components included. Some require JavaScript; some only require HTML5 markup and
CSS classes to work. Its rich set of components have helped make it the most popular project on GitHub. Web developers
have always liked components in their frameworks. A framework that offers easy-to-use components often allows developers
to write less code. Less code to write means there's less code to maintain!

Some popular Bootstrap components include: dropdowns, button groups, button dropdowns, navbar, breadcrumbs, pagination,
alerts, progress bars, and panels. Below is an example of a navbar with a dropdown.

[[img-bootstrap-navbar]]
.Navbar with dropdown
image::chapter3/bootstrap/navbar-with-dropdown.png[Navbar with dropdown, 867, scaledwidth=100%]

When rendered on a mobile device, everything collapses into a hamburger menu that can expand downward.

[[img-bootstrap-navbar-mobile]]
.Navbar on mobile
image::chapter3/bootstrap/navbar-on-mobile.png[Navbar on mobile, 467, scaledwidth=50%]

This navbar requires quite a bit of HTML markup, not shown here for the sake of brevity. You can view this source
online in link:http://getbootstrap.com/components/#navbar-default[Bootstrap's documentation]. The simpler example below
shows the basic structure.

[source,html]
----
include::{sourcedir}/chapter3/bootstrap/navbar.html[]
----

Alerts are useful for displaying feedback to the user. You can invoke differently colored alerts with different classes. You'll need
to add an `alert` class, plus `alert-[success|info|warning|danger]` to indicate the colors.

[source,html]
----
include::{sourcedir}/chapter3/bootstrap/alerts.html[]
----

This renders alerts like the following.

[[img-bootstrap-alerts]]
.Alerts
image::chapter3/bootstrap/alerts.png[Alerts, 828, scaledwidth=100%]

To make an alert closeable, you need to add an `.alert-dismissible` class and a close button.

[source,html]
----
<div class="alert alert-warning alert-dismissible" role="alert">
  <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
  <strong>Warning!</strong> Better check yourself, you're not looking too good.
</div>
----

[[img-bootstrap-alert-dismissable]]
.Closeable alert
image::chapter3/bootstrap/alert-dismissable.png[Closeable alert, 830, scaledwidth=100%]

TIP: To make the links in your alerts match the colors of the alerts, use `.alert-link`.

=== Icons
Icons have always been a big part of web applications. Showing the user a small image is often sexier
and hipper than plain text. Humans are visual beings and icons are a great way to spice things up. In the last
several years, font icons have become popular for web development. Font icons are just fonts, but they contain
symbols and glyphs instead of text. You can style, scale, and load them quickly because of their small size.

The http://glyphicons.com/[Glyphicons] Halflings set of font icons is included with Bootstrap. They're not normally free,
but their creator has made them free for Bootstrap users. There are more than 250 glyphs in this set. They're often
used to display eye candy on buttons.

[source,html]
----
<button class="btn btn-info"><i class="glyphicon glyphicon-plus"></i> Add</button>
<button class="btn btn-danger"><i class="glyphicon glyphicon-minus"></i> Delete</button>
<button class="btn btn-default"><i class="glyphicon glyphicon-pencil"></i> Edit</button>
----

You can see how the icons change color based on the font color defined for the element they're inside.

[[img-bootstrap-buttons-icons]]
.Buttons with icons
image::chapter3/bootstrap/buttons-with-icons.png[Buttons with icons, 241, scaledwidth=25%]

You can use other icon fonts with Bootstrap and JHipster, http://fortawesome.github.io/Font-Awesome/[Font Awesome]
being one of the most popular. It's completely free for commercial use and contains over 500 icons. JHipster uses
Font Awesome for its website, but not for generated projects. The
https://github.com/jhipster/generator-jhipster/issues/978#issuecomment-69988321[reason] for not including Font Awesome is that
Glyphicons is the default and it's easy to change the font in your project. Simply add it as a dependency
in your `bower.json` file.

=== Customizing CSS
If you'd like to override Bootstrap classes in your project, the easiest thing to do is to put the override rule in a CSS
file that comes after Bootstrap's CSS. Or you can modify `src/main/webapp/css/main.css` directly. If you're
using Sass to compile `*.scss` files, you can modify `src/main/webapp/scss/main.scss` instead. Using Sass results in a much
more concise authoring environment. Below is the default `vendor.scss` file that Yeoman generates. You can see that
it overrides the `$icon-font-path` variable and imports Bootstrap. Default rules are overridden in `src/main/webapp/scss/main.scss`.

[source,css]
.src/main/webapp/scss/vendor.scss
----
$icon-font-path: "../fonts/";

/* Sass bower components will be injected here */
/* bower:scss */
@import "../bower_components/bootstrap-sass/assets/stylesheets/_bootstrap.scss";
/* endinject */
/* bower:sass */
/* endinject */

----

=== Angular and Bootstrap
There's a number of other open-source components that can help to further enhance an application built with Angular and
Bootstrap that are not included in JHipster at the time of this writing:

* https://angular-ui.github.io/bootstrap/[UI-Bootstrap]: Bootstrap components written in pure AngularJS by the AngularUI Team. No jQuery required.
* http://ionicframework.com[Ionic]: Offers a library of mobile-optimized HTML, CSS, and JavaScript components, gestures,
and tools for building highly interactive apps. Built with Sass and optimized for AngularJS. Provides a native look and feel.
* https://github.com/jirikavi/AngularJS-Toaster[AngularJS-Toaster]: An AngularJS port of the http://codeseven.github.io/toastr/[Toastr] non-blocking notification
jQuery library.

== Internationalization (i18n)
Internationalization (also called i18n because the word has 18 letters between "`i`" and "`n`") is a first-class citizen in
JHipster. Translating an application to another language is easiest if you put the i18n system in place at the beginning of
a project. https://angular-translate.github.io/[angular-translate] provides directives that make it easy to translate
your application into multiple languages.

To use angular-translate, you simply add a "`data-translate`" attribute with a key.

[source,html]
----
<label data-translate="user.firstname">First Name</label>
----

The key references a JSON document, which will return the translated string. AngularJS will then replace the "`First Name`"
string with the translated version.

JHipster allows you to choose a default language and translations when you first create a project. It stores the JSON documents
for these languages in `src/main/webapp/i18n`. You can install additional languages using `yo jhipster:languages`. At the time
of this writing, JHipster supports 26 languages. You can also add a new language. To set the default language, modify
`src/main/webapp/app/blocks/config/translation.config.js` and its preferred-language line.

[source,javascript]
.src/main/webapp/app/blocks/config/translation.config.js
----
$translateProvider.preferredLanguage('de');
----

== Sass
Sass stands for "`syntactically awesome style sheets`". It's a language for writing CSS with the goodies you're used to
using in modern programming languages, such as variables, nesting, mixins, and inheritance. Sass uses the `$` symbol
to indicate a variable, which can then be referenced later in your document.

[source,sass]
----
$font-stack:    Helvetica, sans-serif
$primary-color: #333

body
    font: 100% $font-stack
    color: $primary-color
----

Sass 3 introduces a new syntax known as SCSS that is fully compatible with the syntax of CSS3, while still supporting
the full power of Sass. It looks more like CSS.

[source,sass]
----
$font-stack:    Helvetica, sans-serif;
$primary-color: #333;

body {
    font: 100% $font-stack;
    color: $primary-color;
}
----

The code above renders the following CSS.

[source,css]
----
body {
    font: 100% Helvetica, sans-serif;
    color: #333;
}
----

Another powerful feature of Sass is the ability to write nested CSS selectors. When writing HTML, you can often visualize
the hierarchy of elements. Sass allows you to bring that hierarchy into your CSS.

[source,sass]
----
nav {
    ul {
        margin: 0;
        padding: 0;
        list-style: none;
    }

    li {
        display: inline-block;
    }

    a {
        display: block;
        padding: 6px 12px;
        text-decoration: none;
    }
}
----

WARNING: Overly nested rules will result in over-qualified CSS that can be hard to maintain.

As mentioned, Sass also supports partials, imports, mixins, and inheritance. Mixins can be particularly
useful for handling vendor prefixes.

[source,sass]
----
@mixin border-radius($radius) { <1>
    -webkit-border-radius: $radius;
       -moz-border-radius: $radius;
        -ms-border-radius: $radius;
            border-radius: $radius;
}

.box { @include border-radius(10px); } <2>
----
<1> Create a mixin using `@mixin` and give it a name. This uses `$radius` as a variable to set the radius value.
<2> Use `@include` followed by the name of the mixin.

CSS generated from the above code looks as follows.

[source,css]
----
.box {
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    -ms-border-radius: 10px;
    border-radius: 10px;
}
----

Bootstrap is written with http://lesscss.org/[Less], a CSS pre-processor with similar features to Sass. However, its
founders have https://twitter.com/mdo/status/591364406816079873[announced] that they'll be using SCSS for the 4.0
version.

JHipster allows you to use Sass by integrating https://www.npmjs.com/package/gulp-sass[gulp-sass]. To learn more about structuring your
CSS and naming classes, read the great https://smacss.com/[_Scalable and Modular Architecture for CSS_].

== Gulp
JHipster uses http://gulpjs.com/[Gulp] for building the client. It used to support http://gruntjs.com/[Grunt], but it
was removed when Gulp's popularity skyrocketed. Gulp allows you to perform tasks like minification, concatenation,
compilation (e.g. from TypeScript/CoffeeScript to JavaScript), unit testing, and more.

Gulp is the de facto standard of JavaScript build tools and has over
2,500 http://gulpjs.com/plugins/[plugins]. You can install and manage Gulp plugins via https://www.npmjs.com/[npm],
a package manager for https://nodejs.org/[Node.js]. You can install anything specified as a dependency in
your project's `package.json` using `npm install`. To install Gulp globally (so you can use it anywhere), run `npm install -g gulp-cli`.

Gulp calls itself "`the streaming build system`". Gulp is all about streams and building complex pipelines with ease.
It uses Node.js's streams, and executes faster than Grunt, since it does not open/close files or create intermediary copies. Gulp
was released a couple of years after Grunt, and has received a lot of praise from the JavaScript community. In accordance
with the UNIX philosophy, Gulp plugins each try to do one thing well.

To show a simple example of how to use Gulp, I integrated it into the angular-seed project. Below are the `package.json` and `gulpfile.js`
that optimize everything for production.

The following steps show how to integrate Gulp into https://github.com/angular/angular-seed[angular-seed]. This particular
build file optimizes your JavaScript, CSS, and HTML for production. It concatenates your JavaScript and CSS
files, minifies them, then replaces the references in the HTML to point to the optimized files. First, you have
to configure `package.json` to include Gulp and its plugins for web optimization.

[source,json]
.package.json
----
include::{sourcedir}/chapter3/gulp/package.json[]
----

[source%autofit,javascript]
.gulpfile.js
----
include::{sourcedir}/chapter3/gulp/gulpfile.js[]
----

Before the tasks run, the `index.html` file points to individual CSS and JavaScript files. The `<!-- build:* -\->`
and `<!-- endbuild -\->` are used by the `useminPrepare` task to build the list of files for optimization.

[source,html]
.index.html
----
include::{sourcedir}/chapter3/gulp/index-dev.html[]
----

After the build runs, the `dist/index.html` file points to the revved, combined, and minified CSS and JavaScript files.

[source,html]
.dist/index.html
----
include::{sourcedir}/chapter3/gulp/index-prod.html[]
----

To learn more about JavaScript build tools, see Mark Dalgleish's http://markdalgleish.github.io/presentation-build-wars-gulp-vs-grunt/[Build Wars]
presentation, delivered at MelbJS in Melbourne, Australia, February 12, 2014. I asked Mark
what he thought of these two tools today. He recommended http://webpack.github.io/[webpack] and reading his more recent
https://medium.com/seek-ui-engineering/block-element-modifying-your-javascript-components-d7f99fcab52b["`Block, Element,
Modifying Your JavaScript Components`"] article. Since webpack is not an option for JHipster, I will not cover it in this book.

== WebSockets
WebSockets are an advanced technology that makes it possible to open an interactive communication channel between the
user's browser and a server. With this API, you can send messages to a server and receive event-driven responses
without having to poll the server for a reply. WebSockets have been called "`TCP for the Web`".

If you choose to use WebSockets in a JHipster project, you'll get two JavaScript libraries added to your project:

* http://jmesnil.net/stomp-websocket/doc/[STOMP WebSocket]: STOMP stands for "`simple text-oriented messaging protocol`"
* https://github.com/sockjs/sockjs-client[SockJS]: SockJS provides a WebSocket-like object. If native WebSockets are
not available, it falls back to other browser techniques.

To see how WebSockets work, take a look at the `TrackerController` in a WebSockets-enabled project. This displays real-time
activity information that's been posted to the `/websocket/tracker` endpoint.

[source%autofit,javascript]
.src/main/webapp/app/admin/tracker/tracker.controller.js
----
include::{sourcedir}/chapter3/websockets/tracker.controller.js[]
----

The `Tracker` service allows you to send tracking information, for example, to track when someone has authenticated.

[source,javascript]
.src/main/webapp/scripts/components/tracker/tracker.service.js
----
include::{sourcedir}/chapter3/websockets/tracker.service.js[]
----

WebSockets on the server side of a JHipster project are implemented with http://docs.spring.io/spring/docs/current/spring-framework-reference/html/websocket.html[Spring's WebSocket support]. The next section shows how a developer productivity tool that uses WebSockets implements something very cool.

== Browsersync

http://www.browsersync.io/[Browsersync] is one of those tools that makes you wonder how you ever lived without it. It
keeps your assets in sync with your browser. It's also capable of syncing browsers, so you can, for example, scroll in
Safari and watch synced windows scroll in Chrome and in Safari running in iOS Simulator. When you save
files, it updates your browser windows, saving you an incredible amount of time. As its website says:
"`It's wicked-fast and totally free.`"

Browsersync is free to run and reuse, as guaranteed by its open-source Apache 2.0 License. It contains a number of slick features:

* Interaction sync: It mirrors your scroll, click, refresh, and form actions between browsers while you test.
* File sync: Browsers automatically update as you change HTML, CSS, images, and other project files.
* URL history: Records your test URLs so you can push them back out to all devices with a single click.
* Remote inspector: Remotely tweak and debug webpages that are running on connected devices.

To integrate Browsersync in your project, you need a `package.json` and `gulpfile.js`. Your `package.json` file only needs
to contain a few things, weighing in at a slim 13 lines of JSON.

[source,javascript]
----
include::{sourcedir}/../../../package.json[]
----

The `gulpfile.js` utilizes the tools specified in `package.json` to enable Browsersync and create a magical web-development
experience.

[source%autofit,javascript]
----
include::{sourcedir}/../../../gulpfile.browsersync.js[]
----

After you've created these files, you'll need to install https://nodejs.org/[Node.js] and its package manager, npm. This
should let you run the following command to install Browsersync and Gulp. You will only need to run this command when
dependencies change in `package.json`.
----
npm install
----

Then run the following command to create a blissful development environment in which your browser auto-refreshes when files change
on your hard drive.
----
gulp
----

JHipster integrates Browsersync for you, using JavaScript that looks very similar to what you see above. I highly recommend
Browsersync for your project. It's useful for determining if your web application can handle a page reload without losing the current user's state.

== Summary

This section describes the UI components in a typical JHipster project. It taught you about the extremely popular JavaScript MVC framework called AngularJS. It showed you how to author HTML pages and use Bootstrap to make things look pretty. A build tool is essential for building a modern web application and it showed you how you can use Gulp. Finally, it showed you how WebSockets work and described the beauty of Browsersync.

Now that you've learned about many of the UI components in a JHipster project, let's learn about the API side of things.
